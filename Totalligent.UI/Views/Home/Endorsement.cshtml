@model IEnumerable<Totalligent.BusinessEntities.Endorsement>

@{
    ViewBag.Title = "Endorsement";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="col-lg-12 col-12 p-t-30">
    <div class="box">
        <!-- Large modal -->
        <div class="col-md-3 p-t-30">
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bd-example-modal-lg">Add new</button>
        </div>
        <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="box-body">
                        <form id="formEndorsement">
                            <div class="row">
                                <div class="col-md-2 form-group">
                                    <label class="col-form-label">Ticket No</label>
                                    <input type="text" class="form-control" id="TicketNumber" name="TicketNumber">
                                </div>
                                <div class="col-md-6 form-group">
                                    <label class="col-form-label">Client Name</label>
                                    <select id="ClientName" name="ClientName" class="form-control">
                                        <option value="2">TCS</option>
                                        <option value="3">CTS</option>
                                    </select>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label class="col-form-label">Mail Received Date</label>
                                    <input type="date" class="form-control" id="MailReceivedDate" name="MailReceivedDate">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4 form-group">
                                    <label class="col-form-label">GL PolicyNo</label>
                                    <input type="text" class="form-control" id="GLPolicyNumber" name="GLPolicyNumber">
                                </div>
                                <div class="col-md-4 form-group">
                                    <label class="col-form-label">WC PolicyNo</label>
                                    <input type="text" class="form-control" id="WCPolicyNumber" name="WCPolicyNumber">
                                </div>
                                <div class="col-md-4 form-group">
                                    <label class="col-form-label">Policy Period</label>
                                    <input type="text" readonly class="form-control" id="PolicyPeriod" name="PolicyPeriod">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4 form-group">
                                    <label class="col-form-label">Error Description</label>
                                    <select id="ErrorDescription" name="ErrorDescription" class="form-control">
                                        <option selected="selected" value="">Description</option>
                                        <option value="Completed">Completed</option>
                                        <option value="Credit Limit Error">Credit Limit Error</option>
                                        <option value="Credit Days Exceed">Credit Days Exceed</option>
                                        <option value="Customer Code Doesnot Exist">Customer Code Doesnot Exist</option>
                                        <option value="Need to Revice">Need to Revice</option>
                                        <option value="Others">Others</option>
                                        <option value="Ignored">Ignored</option>

                                      
                                    </select>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label class="col-form-label">Endorsement Type</label>
                                    <select id="EndorsementType" name="EndorsementType" class="form-control">
                                        <option selected="selected" value="">Endorsement Type</option>
                                        <option value="Add">Add</option>
                                        <option value="Delete">Delete</option>
                                        <option value="Others">Others</option>
                                    </select>
                                </div>
                                <div class="col-md-4 form-group">
                                    <label class="col-form-label">GL Endorsement Document</label>
                                    <input type="file" class="form-control" name="GLpostedFileDoc" id="fileUploadGLEndorsement" accept=".rar" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4 form-group">
                                    <label class="col-form-label">GL Endorsement Page</label>
                                    <input type="file" class="form-control" name="GLpostedFilePage" id="fileUploadGLEndorsementPage" accept=".xls,.xlsx" />
                                </div>
                                <div class="col-md-4 form-group">
                                    <label class="col-form-label">GL Premium</label>
                                    <input type="number" class="form-control" name="GLPremium" id="GLPremium" />
                                </div>
                                <div class="col-md-4 form-group">
                                    <label class="col-form-label">WC Endorsement Page</label>
                                    <input type="file" class="form-control" name="WLpostedFilePage" id="fileUploadWLEndorsementPage" accept=".xls,.xlsx" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4 form-group">
                                    <label class="col-form-label">WC Premium</label>
                                    <input type="number" class="form-control" name="WCPremium" id="WCPremium" />
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="box-footer text-right">
                        <button id="btnSubmitEndorsement" class="btn btn-rounded btn-primary">Submit</button>
                        @*<button class="btn btn-rounded btn-secondary">Cancel</button>*@
                    </div>
                </div>
            </div>
        </div>



        <div class="box-body">
            <div class="table-responsive">
                <table id="productOverviewMaster" class="table product-overview">
                    <thead>
                        <tr>
                            <th>Draft No</th>
                            <th>Policy No</th>
                            <th>Insurance Company Name</th>
                            <th>Client Company Name</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model != null)
                        {
                            if (Model.Count() > 0)
                            {
                                foreach (var item in Model)
                                {
                                    <tr>
                                        <td>@Html.DisplayFor(modelItem => item.TicketNumber)</td>
                                        <td>@Html.DisplayFor(modelItem => item.CreatedAt)</td>
                                        <td>@Html.DisplayFor(modelItem => item.MailReceivedDate)</td>
                                        <td>@Html.DisplayFor(modelItem => item.ClientName)</td>
                                        <td>@Html.DisplayFor(modelItem => item.GLPolicyNumber)</td>
                                        <td>@Html.DisplayFor(modelItem => item.WCPolicyNumber)</td>
                                        <td>@Html.DisplayFor(modelItem => item.CreatedAt)</td>
                                        <td>@Html.DisplayFor(modelItem => item.ErrorDescription)</td>
                                        <td>@Html.DisplayFor(modelItem => item.CreatedBy)</td>

                                        <td>
                                            <a href="Edit?QuotationId=@item.EndorsementId" class="text-dark pr-10" data-toggle="tooltip" title="" data-original-title="Edit">
                                                <i class="ti-marker-alt"></i>
                                            </a> <a href="javascript:void(0)" class="text-dark" title="" data-toggle="tooltip" data-original-title="Delete">
                                                <i class="ti-trash"></i>
                                            </a>
                                            <a href="Edit?QuotationId=@item.EndorsementId" class="text-dark pr-10" data-toggle="tooltip" title="" data-original-title="Edit">
                                                <i class="ti-marker-alt"></i>
                                            </a> <a href="javascript:void(0)" class="text-dark" title="" data-toggle="tooltip" data-original-title="Delete">
                                                <i class="ti-trash"></i>
                                            </a>
                                        </td>



                                    </tr>
                                }

                            }
                            else
                            {
                                <tr>
                                    <td colspan="5"></td>
                                </tr>
                            }

                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $('#btnSubmitEndorsement').on('click', function () {
        var formData = $('#formEndorsement').serialize();
        $.ajax({

            type: "POST",
            url: "/Home/Endorsement",
            dataType: "json",
            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
            data: formData,
            success: function (res) {
                console.log(res);
            },
            error: function () {
                alert('Error while saving the data.!');
            }
        })
    });
    //$('#btnClear').on('click', function () {
    //    window.location.href = "/Admin/PolicyIssuance"

    //});
    //$(document).ready(function () {
    //    var buttonCommon = {
    //        exportOptions: {
    //            format: {
    //                body: function (data, row, column, node) {
    //                    // Strip $ from salary column to make it numeric
    //                    return column === 5 ?
    //                        data.replace(/[$,]/g, '') :
    //                        data;
    //                }
    //            }
    //        }
    //    };
    //    $('#productOverviewMaster').dataTable({
    //        dom: 'Bfrtip',
    //        buttons: [
    //            $.extend(true, {}, buttonCommon, {
    //                extend: 'pdfHtml5',
    //                text: '<i class="mdi mdi-file-pdf"></i> Save to PDF',
    //                exportOptions: {
    //                    columns: [0, 1, 2, 3]
    //                },
    //                className: 'btn btn-secondary'
    //            })
    //        ]
    //    });
    //});
</script>